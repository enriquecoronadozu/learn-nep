



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Project documentation for NEP">
      
      
        <link rel="canonical" href="https://enriquecoronadozu.github.io/server/">
      
      
        <meta name="author" content="Enrique Coronado">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.1">
    
    
      
        <title>NEP API</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.3020aac5.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#using-fixed-ip-and-port" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://enriquecoronadozu.github.io/" title="NEP" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              NEP
            </span>
            <span class="md-header-nav__topic">
              Client-Server
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://enriquecoronadozu.github.io/learn-nep/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Enriquecoronadozu
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://enriquecoronadozu.github.io/" title="NEP" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    NEP
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://enriquecoronadozu.github.io/learn-nep/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    Enriquecoronadozu
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../patterns/" title="Basic theory" class="md-nav__link">
      Basic theory
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Python version
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Python version
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../publish/" title="Publish-Subscribe" class="md-nav__link">
      Publish-Subscribe
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Client-Server
      </label>
    
    <a href="./" title="Client-Server" class="md-nav__link md-nav__link--active">
      Client-Server
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-fixed-ip-and-port" title="Using fixed IP and port" class="md-nav__link">
    Using fixed IP and port
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-client" title="Simple client" class="md-nav__link">
    Simple client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-server" title="Simple server" class="md-nav__link">
    Simple server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-default-python-sockets" title="Using default Python sockets" class="md-nav__link">
    Using default Python sockets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-nep-master" title="Using NEP master" class="md-nav__link">
    Using NEP master
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../c_sharp/" title="C# version" class="md-nav__link">
      C# version
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../java/" title="Java (Matlab and Android)" class="md-nav__link">
      Java (Matlab and Android)
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-fixed-ip-and-port" title="Using fixed IP and port" class="md-nav__link">
    Using fixed IP and port
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-client" title="Simple client" class="md-nav__link">
    Simple client
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simple-server" title="Simple server" class="md-nav__link">
    Simple server
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-default-python-sockets" title="Using default Python sockets" class="md-nav__link">
    Using default Python sockets
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-nep-master" title="Using NEP master" class="md-nav__link">
    Using NEP master
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Client-Server</h1>
                
                <p>In the Client-Server pattern a node (client) sends a request of some data to other node (server). The execution of the client node blocks its execution until a response is send by the server. </p>
<p><img alt="Material Screenshot" src="../img/cs.png" /></p>
<p>Examples of client-server applications are shown bellow.</p>
<h2 id="using-fixed-ip-and-port"><strong> Using fixed IP and port </strong></h2>
<p>When simple applications with few nodes are needed a fixed endpoint value (IP and port) can be enough</p>
<h3 id="simple-client">Simple client</h3>
<p>A simple client node asking each 2 seconds for some information can be defined as:</p>
<pre><code class="python">import nep 
import time 

client = nep.client('127.0.0.1', 8014) # Create a new client instance

while True:
    msg = {&quot;message&quot;:&quot;client request&quot;} # Message to send as request
    client.send_info(msg)   # Send request
    print (client.listen_info()) # Wait for server response
    time.sleep(2) # Wait one second
</code></pre>

<p>In this example a new instance of the <code>nep.client</code> class is created with the line:</p>
<pre><code>client = nep.client('127.0.0.1', 8014)
</code></pre>

<p>For this, the IP and PORT parameters are defined as <code>'127.0.0.1'</code> and <code>8014</code> respectivelly.</p>
<p>The function <code>send_info</code>  can be used to send a request to the server. This request must be defined as a python dictionary. In this case the dictionary <code>{"message":"client request"}</code> is defined to be send as request.</p>
<p>The function <code>listen_info</code> waits until the server send its response. This function also reads the message sent by the server.</p>
<h3 id="simple-server">Simple server</h3>
<p>The next Python script shown a simple example of a server node.</p>
<pre><code class="python">import nep  # Import nep library
server = nep.server('127.0.0.1', 8014) #Create a new server instance

while True:
    request = server.listen_info() # Wait for client request
    server.send_info({&quot;message&quot;:&quot;hello client&quot;}) # Send server response
    print (request) 

</code></pre>

<p>In this example a new instance of the <code>server.nep</code> class is created with the line:</p>
<pre><code>server = nep.server('127.0.0.1', 8014)
</code></pre>

<p>We need to define the same IP and PORT values that in the client node. The functions <code>listen_info</code> and <code>send_info</code>can be used to read a client request and send a response respectively. In this example the response to be sent in defined as <code>{"message":"hello client"}</code>.</p>
<h2 id="using-default-python-sockets"><strong>Using default Python sockets</strong></h2>
<p>The client ans server classes of NEP uses ZeroMQ by deafult (sockets with steroids). However, an optional parameter can be used to select the soxket type. In order to use TCP/IP POSIX sockets a client with port value of 30000 can be defined as:</p>
<pre><code>client = nep.client('127.0.0.1', 30000, 'normal')
</code></pre>

<p>However, instead of dictionaries messages must be send as string, a full example is shown bellow:</p>
<pre><code class="python">import nep 
import time 

client = nep.client('127.0.0.1', 30000, 'normal') # Create a new client instance

while True:
    msg = &quot;hello server&quot; # Message to send as request
    client.send_info(msg)   # Send request
    print (client.listen_info()) # Wait for server response
    time.sleep(1) # Wait one second
</code></pre>

<p>The server node used to response the client requests can be defined as:</p>
<pre><code class="python">import nep  # Import nep library
server = nep.server('127.0.0.1', 30000, 'normal') #Create a new server instance

while True:
    request = server.listen_info() # Wait for client request
    print (request) 
    server.send_info(&quot;server response&quot;) # Send server response

</code></pre>

<p>In this case it is also needed to define the socket types as <code>normal</code> as shown bellow:</p>
<pre><code class="python">server = nep.server('127.0.0.1', 30000, 'normal')
</code></pre>

<blockquote>
<p><strong>WARNING:</strong> It is not possible to communicate a  ZeroMQ socket and a normal TCP/IP POSIX socket</p>
</blockquote>
<h2 id="using-nep-master"><strong> Using NEP master </strong></h2>
<p>When the number of nodes increases the management of IP and port values becomes a tedious task. In order avoid this problem NEP nodes using the client/server pattern can be managed by the NEP master.</p>
<p>An example of a client connected through NEP master is shown bellow:</p>
<pre><code class="python">import nep 
import time 

node = nep.node(&quot;client_test&quot;) # New nep node
client = node.new_client(&quot;client_server_sample&quot;) # Topic

while True:
    msg = {&quot;message&quot;:&quot;client request&quot;} # Message to send as request
    client.send_info(msg)   # Send request
    print (client.listen_info()) # Wait for server response
    time.sleep(1) # Wait one second
</code></pre>

<p>However, the way to define the client present some diferences. First, it is need to create a <code>nep.node</code> instance and define a unique name for this node, in this case that name is defined as <code>"client_test"</code>. Then, it is required to start a new client instance using the <code>new_client()</code> function. It is also requires to define a name for the client. This name, denoted as topic, will be used by the NEP master to assign some suitable IP and port values to the client instance.
In this case the topic is defined as  <code>"client_server_sample"</code>.</p>
<p>The server is defined in a similar way but using the <code>new_server()</code> function as shown in the next example:</p>
<pre><code class="python">import nep  # Import nep library

node = nep.node(&quot;server_test&quot;)  # New nep node
server = node.new_server(&quot;client_server_sample&quot;) # Topic

while True:
    msg = {&quot;message&quot;:&quot;hello&quot;} # Message to send as response
    request = server.listen_info() # Wait for client request
    server.send_info(msg) # Send server response
    print (request) 
</code></pre>

<blockquote>
<p><strong>WARNING:</strong> NEP master must be first started in order to use these last two examples</p>
</blockquote>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../publish/" title="Publish-Subscribe" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Publish-Subscribe
              </span>
            </div>
          </a>
        
        
          <a href="../c_sharp/" title="C# version" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                C# version
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2019 Enrique Coronado
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.dc02f8ce.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>